<div class="container">
  <h2 class="text-center mb-4">👨‍🎓 Gestión de Alumnos</h2>

  <!-- Formulario -->
  <div class="card shadow mb-4">
    <div class="card-header" [class.bg-warning]="alumnoSeleccionado" 
                          [class.bg-primary]="!alumnoSeleccionado" 
                          [class.text-white]="true">
      <h5 class="mb-0">
        {{ alumnoSeleccionado ? '✏️ Editar Alumno' : '➕ Agregar Nuevo Alumno' }}
      </h5>
    </div>
    <div class="card-body">
      <form (ngSubmit)="guardarAlumno()" #alumnoForm="ngForm">
        <div class="row g-3">
          <div class="col-md-6">
            <input [(ngModel)]="nuevoAlumno.nombre" name="nombre" 
                   class="form-control" placeholder="Nombre" required>
          </div>
          <div class="col-md-6">
            <input [(ngModel)]="nuevoAlumno.apellido" name="apellido" 
                   class="form-control" placeholder="Apellido" required>
          </div>
          
          <div class="col-md-6">
            <input [(ngModel)]="nuevoAlumno.email" name="email" type="email"
                   class="form-control" placeholder="Email" required>
          </div>
          <div class="col-md-3">
            <input [(ngModel)]="nuevoAlumno.carrera" name="carrera"
                   class="form-control" placeholder="Carrera" required>
          </div>
          <div class="col-md-3">
            <input [(ngModel)]="nuevoAlumno.semestre" name="semestre" type="number"
                   class="form-control" placeholder="Semestre" min="1" required>
          </div>
          
          <div class="col-md-6">
            <input [(ngModel)]="nuevoAlumno.indice_academico" name="indice" type="number" step="0.01"
                   class="form-control" placeholder="Índice Académico" min="0" max="5" required>
          </div>
        </div>

        <div class="mt-3">
          <button type="submit" class="btn btn-success">
            {{ alumnoSeleccionado ? '🔄 Actualizar' : '✅ Agregar' }} Alumno
          </button>
          <button type="button" *ngIf="alumnoSeleccionado" 
                  (click)="cancelarEdicion()" class="btn btn-secondary ms-2">
            ❌ Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Lista de alumnos -->
  <div class="card shadow">
    <div class="card-header bg-dark text-white">
      <h5 class="mb-0">📋 Lista de Alumnos ({{ alumnos.length }})</h5>
    </div>
    <div class="card-body">
      <div *ngIf="alumnos.length === 0" class="text-center py-4 text-muted">
        <p>No hay alumnos registrados aún.</p>
      </div>

      <table *ngIf="alumnos.length > 0" class="table table-hover">
        <thead class="table-light">
          <tr>
            <th>#</th>
            <th>Nombre Completo</th>
            <th>Email</th>
            <th>Carrera</th>
            <th>Semestre</th>
            <th>Índice</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let alumno of alumnos; let i = index">
            <td class="fw-bold">{{ i + 1 }}</td>
            <td>{{ alumno.nombre }} {{ alumno.apellido }}</td>
            <td>{{ alumno.email }}</td>
            <td>
              <span class="badge bg-info">{{ alumno.carrera }}</span>
            </td>
            <td>
              <span class="badge bg-secondary">S{{ alumno.semestre }}</span>
            </td>
            <td>
              <span [class]="getClaseIndice(alumno.indice_academico)" class="badge">
                {{ alumno.indice_academico }}
              </span>
            </td>
            <td>
              <button (click)="editarAlumno(alumno)" class="btn btn-warning btn-sm me-1">
                ✏️
              </button>
              <button (click)="eliminarAlumno(alumno.id)" class="btn btn-danger btn-sm">
                🗑️
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>